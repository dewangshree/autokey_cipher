<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Autokey Cipher - Encrypt & Decrypt</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>Autokey Cipher</h1>
            <p class="subtitle">Encrypt and Decrypt messages using the Autokey Cipher algorithm</p>
        </header>

        <div class="explanation-section">
            <h2>How Autokey Cipher Works</h2>
            <div class="explanation-content">
                <p><strong>What is Autokey Cipher?</strong></p>
                <p>The Autokey Cipher is a polyalphabetic substitution cipher that uses the plaintext itself as part of the key. Unlike the Vigen√®re cipher which repeats a short keyword, the autokey cipher extends the key by appending the plaintext to the initial keyword.</p>
                
                <p><strong>How it works:</strong></p>
                <ul>
                    <li>The keystream is formed by: <code>Keyword + Plaintext</code></li>
                    <li>Each letter is encrypted using: <code>C = (P + K) mod 26</code></li>
                    <li>Where P is the plaintext letter, K is the keystream letter, and C is the ciphertext letter</li>
                </ul>

                <p><strong>What happens when the key has fewer letters than the plaintext?</strong></p>
                <p>This is where autokey cipher shines! When the keyword is shorter than the plaintext, the remaining keystream is automatically generated by using the plaintext itself. For example, if your keyword is "KEY" (3 letters) and plaintext is "HELLO" (5 letters), the keystream becomes "KEYHE" - the keyword followed by the first 2 letters of the plaintext.</p>

                <p><strong>What happens when the key has more letters than the plaintext?</strong></p>
                <p>If the keyword is longer than the plaintext, only the first N letters of the keyword are used (where N is the length of the plaintext). The extra letters in the keyword are simply ignored.</p>
            </div>
        </div>

        <!-- Encrypt Section -->
        <div class="operation-section encrypt-section">
            <h2 class="section-title">Encrypt</h2>
            <div class="input-section">
                <div class="input-group">
                    <label for="encrypt-keyword">Keyword:</label>
                    <div class="input-with-button">
                        <input type="text" id="encrypt-keyword" placeholder="Enter keyword (e.g., KEY)" />
                        <button id="generateEncryptKeyBtn" class="btn-secondary">Generate Random Key</button>
                    </div>
                </div>

                <div class="input-group">
                    <label for="encrypt-plaintext">Plaintext:</label>
                    <input type="text" id="encrypt-plaintext" placeholder="Enter text to encrypt" />
                </div>

                <button id="encryptBtn" class="btn-primary">Encrypt</button>
            </div>

            <div class="output-section">
                <div class="output-group">
                    <label for="encrypt-ciphertext">Ciphertext:</label>
                    <textarea id="encrypt-ciphertext" readonly placeholder="Encrypted text will appear here..."></textarea>
                </div>
            </div>

            <div id="encrypt-steps-section" class="steps-section" style="display: none;">
                <h3>Step-by-Step Encryption Process</h3>
                <div id="encrypt-steps-container"></div>
            </div>
        </div>

        <!-- Decrypt Section -->
        <div class="operation-section decrypt-section">
            <h2 class="section-title">Decrypt</h2>
            <div class="input-section">
                <div class="input-group">
                    <label for="decrypt-keyword">Keyword:</label>
                    <div class="input-with-button">
                        <input type="text" id="decrypt-keyword" placeholder="Enter keyword (e.g., KEY)" />
                        <button id="generateDecryptKeyBtn" class="btn-secondary">Generate Random Key</button>
                    </div>
                </div>

                <div class="input-group">
                    <label for="decrypt-ciphertext">Ciphertext:</label>
                    <input type="text" id="decrypt-ciphertext" placeholder="Enter ciphertext to decrypt" />
                </div>

                <button id="decryptBtn" class="btn-primary">Decrypt</button>
            </div>

            <div class="output-section">
                <div class="output-group">
                    <label for="decrypt-plaintext">Plaintext:</label>
                    <textarea id="decrypt-plaintext" readonly placeholder="Decrypted text will appear here..."></textarea>
                </div>
            </div>

            <div id="decrypt-steps-section" class="steps-section" style="display: none;">
                <h3>Step-by-Step Decryption Process</h3>
                <div id="decrypt-steps-container"></div>
            </div>
        </div>

        <div id="error-message" class="error-message"></div>
    </div>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
